{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://discord-vscode/./node_modules/bindings/bindings.js","webpack://discord-vscode/./node_modules/bufferutil/fallback.js","webpack://discord-vscode/./node_modules/bufferutil/index.js","webpack://discord-vscode/./node_modules/dayjs/dayjs.min.js","webpack://discord-vscode/./node_modules/discord-rpc/src/client.js","webpack://discord-vscode/./node_modules/discord-rpc/src/constants.js","webpack://discord-vscode/./node_modules/discord-rpc/src/index.js","webpack://discord-vscode/./node_modules/discord-rpc/src/transports/index.js","webpack://discord-vscode/./node_modules/discord-rpc/src/transports/ipc.js","webpack://discord-vscode/./node_modules/discord-rpc/src/transports/websocket.js","webpack://discord-vscode/./node_modules/discord-rpc/src/util.js","webpack://discord-vscode/./node_modules/file-uri-to-path/index.js","webpack://discord-vscode/./node_modules/node-gyp-build/index.js","webpack://discord-vscode/./node_modules/node-gyp-build/node-gyp-build.js","webpack://discord-vscode/./node_modules/register-scheme/index.js","webpack://discord-vscode/./node_modules/tr46/index.js","webpack://discord-vscode/./src/activity.ts","webpack://discord-vscode/./src/constants.ts","webpack://discord-vscode/./src/logger.ts","webpack://discord-vscode/./src/util.ts","webpack://discord-vscode/./node_modules/utf-8-validate/fallback.js","webpack://discord-vscode/./node_modules/utf-8-validate/index.js","webpack://discord-vscode/./node_modules/webidl-conversions/lib/index.js","webpack://discord-vscode/./node_modules/whatwg-url/lib/URL-impl.js","webpack://discord-vscode/./node_modules/whatwg-url/lib/URL.js","webpack://discord-vscode/./node_modules/whatwg-url/lib/public-api.js","webpack://discord-vscode/./node_modules/whatwg-url/lib/url-state-machine.js","webpack://discord-vscode/./node_modules/whatwg-url/lib/utils.js","webpack://discord-vscode/./node_modules/ws/index.js","webpack://discord-vscode/./node_modules/ws/lib/buffer-util.js","webpack://discord-vscode/./node_modules/ws/lib/constants.js","webpack://discord-vscode/./node_modules/ws/lib/event-target.js","webpack://discord-vscode/./node_modules/ws/lib/extension.js","webpack://discord-vscode/./node_modules/ws/lib/limiter.js","webpack://discord-vscode/./node_modules/ws/lib/permessage-deflate.js","webpack://discord-vscode/./node_modules/ws/lib/receiver.js","webpack://discord-vscode/./node_modules/ws/lib/sender.js","webpack://discord-vscode/./node_modules/ws/lib/stream.js","webpack://discord-vscode/./node_modules/ws/lib/validation.js","webpack://discord-vscode/./node_modules/ws/lib/websocket-server.js","webpack://discord-vscode/./node_modules/ws/lib/websocket.js","webpack://discord-vscode/external commonjs \"vscode\"","webpack://discord-vscode/external node-commonjs \"crypto\"","webpack://discord-vscode/external node-commonjs \"events\"","webpack://discord-vscode/external node-commonjs \"fs\"","webpack://discord-vscode/external node-commonjs \"http\"","webpack://discord-vscode/external node-commonjs \"https\"","webpack://discord-vscode/external node-commonjs \"net\"","webpack://discord-vscode/external node-commonjs \"os\"","webpack://discord-vscode/external node-commonjs \"path\"","webpack://discord-vscode/external node-commonjs \"punycode\"","webpack://discord-vscode/external node-commonjs \"stream\"","webpack://discord-vscode/external node-commonjs \"timers\"","webpack://discord-vscode/external node-commonjs \"tls\"","webpack://discord-vscode/external node-commonjs \"url\"","webpack://discord-vscode/external node-commonjs \"zlib\"","webpack://discord-vscode/./node_modules/lodash-es/isObject.js","webpack://discord-vscode/./node_modules/lodash-es/_freeGlobal.js","webpack://discord-vscode/./node_modules/lodash-es/_root.js","webpack://discord-vscode/./node_modules/lodash-es/now.js","webpack://discord-vscode/./node_modules/lodash-es/_trimmedEndIndex.js","webpack://discord-vscode/./node_modules/lodash-es/_baseTrim.js","webpack://discord-vscode/./node_modules/lodash-es/_Symbol.js","webpack://discord-vscode/./node_modules/lodash-es/_getRawTag.js","webpack://discord-vscode/./node_modules/lodash-es/_objectToString.js","webpack://discord-vscode/./node_modules/lodash-es/_baseGetTag.js","webpack://discord-vscode/./node_modules/lodash-es/isObjectLike.js","webpack://discord-vscode/./node_modules/lodash-es/isSymbol.js","webpack://discord-vscode/./node_modules/lodash-es/toNumber.js","webpack://discord-vscode/./node_modules/lodash-es/debounce.js","webpack://discord-vscode/./node_modules/lodash-es/throttle.js","webpack://discord-vscode/./node_modules/node-fetch/lib/index.mjs","webpack://discord-vscode/./node_modules/tslib/tslib.es6.mjs","webpack://discord-vscode/webpack/bootstrap","webpack://discord-vscode/webpack/runtime/define property getters","webpack://discord-vscode/webpack/runtime/hasOwnProperty shorthand","webpack://discord-vscode/webpack/runtime/make namespace object","webpack://discord-vscode/./src/extension.ts"],"sourcesContent":["/**\n * Module dependencies.\n */\n\nvar fs = require('fs'),\n  path = require('path'),\n  fileURLToPath = require('file-uri-to-path'),\n  join = path.join,\n  dirname = path.dirname,\n  exists =\n    (fs.accessSync &&\n      function(path) {\n        try {\n          fs.accessSync(path);\n        } catch (e) {\n          return false;\n        }\n        return true;\n      }) ||\n    fs.existsSync ||\n    path.existsSync,\n  defaults = {\n    arrow: process.env.NODE_BINDINGS_ARROW || '  ',\n    compiled: process.env.NODE_BINDINGS_COMPILED_DIR || 'compiled',\n    platform: process.platform,\n    arch: process.arch,\n    nodePreGyp:\n      'node-v' +\n      process.versions.modules +\n      '-' +\n      process.platform +\n      '-' +\n      process.arch,\n    version: process.versions.node,\n    bindings: 'bindings.node',\n    try: [\n      // node-gyp's linked version in the \"build\" dir\n      ['module_root', 'build', 'bindings'],\n      // node-waf and gyp_addon (a.k.a node-gyp)\n      ['module_root', 'build', 'Debug', 'bindings'],\n      ['module_root', 'build', 'Release', 'bindings'],\n      // Debug files, for development (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Debug', 'bindings'],\n      ['module_root', 'Debug', 'bindings'],\n      // Release files, but manually compiled (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Release', 'bindings'],\n      ['module_root', 'Release', 'bindings'],\n      // Legacy from node-waf, node <= 0.4.x\n      ['module_root', 'build', 'default', 'bindings'],\n      // Production \"Release\" buildtype binary (meh...)\n      ['module_root', 'compiled', 'version', 'platform', 'arch', 'bindings'],\n      // node-qbs builds\n      ['module_root', 'addon-build', 'release', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'debug', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'default', 'install-root', 'bindings'],\n      // node-pre-gyp path ./lib/binding/{node_abi}-{platform}-{arch}\n      ['module_root', 'lib', 'binding', 'nodePreGyp', 'bindings']\n    ]\n  };\n\n/**\n * The main `bindings()` function loads the compiled bindings for a given module.\n * It uses V8's Error API to determine the parent filename that this function is\n * being invoked from, which is then used to find the root directory.\n */\n\nfunction bindings(opts) {\n  // Argument surgery\n  if (typeof opts == 'string') {\n    opts = { bindings: opts };\n  } else if (!opts) {\n    opts = {};\n  }\n\n  // maps `defaults` onto `opts` object\n  Object.keys(defaults).map(function(i) {\n    if (!(i in opts)) opts[i] = defaults[i];\n  });\n\n  // Get the module root\n  if (!opts.module_root) {\n    opts.module_root = exports.getRoot(exports.getFileName());\n  }\n\n  // Ensure the given bindings name ends with .node\n  if (path.extname(opts.bindings) != '.node') {\n    opts.bindings += '.node';\n  }\n\n  // https://github.com/webpack/webpack/issues/4175#issuecomment-342931035\n  var requireFunc =\n    typeof __webpack_require__ === 'function'\n      ? __non_webpack_require__\n      : require;\n\n  var tries = [],\n    i = 0,\n    l = opts.try.length,\n    n,\n    b,\n    err;\n\n  for (; i < l; i++) {\n    n = join.apply(\n      null,\n      opts.try[i].map(function(p) {\n        return opts[p] || p;\n      })\n    );\n    tries.push(n);\n    try {\n      b = opts.path ? requireFunc.resolve(n) : requireFunc(n);\n      if (!opts.path) {\n        b.path = n;\n      }\n      return b;\n    } catch (e) {\n      if (e.code !== 'MODULE_NOT_FOUND' &&\n          e.code !== 'QUALIFIED_PATH_RESOLUTION_FAILED' &&\n          !/not find/i.test(e.message)) {\n        throw e;\n      }\n    }\n  }\n\n  err = new Error(\n    'Could not locate the bindings file. Tried:\\n' +\n      tries\n        .map(function(a) {\n          return opts.arrow + a;\n        })\n        .join('\\n')\n  );\n  err.tries = tries;\n  throw err;\n}\nmodule.exports = exports = bindings;\n\n/**\n * Gets the filename of the JavaScript file that invokes this function.\n * Used to help find the root directory of a module.\n * Optionally accepts an filename argument to skip when searching for the invoking filename\n */\n\nexports.getFileName = function getFileName(calling_file) {\n  var origPST = Error.prepareStackTrace,\n    origSTL = Error.stackTraceLimit,\n    dummy = {},\n    fileName;\n\n  Error.stackTraceLimit = 10;\n\n  Error.prepareStackTrace = function(e, st) {\n    for (var i = 0, l = st.length; i < l; i++) {\n      fileName = st[i].getFileName();\n      if (fileName !== __filename) {\n        if (calling_file) {\n          if (fileName !== calling_file) {\n            return;\n          }\n        } else {\n          return;\n        }\n      }\n    }\n  };\n\n  // run the 'prepareStackTrace' function above\n  Error.captureStackTrace(dummy);\n  dummy.stack;\n\n  // cleanup\n  Error.prepareStackTrace = origPST;\n  Error.stackTraceLimit = origSTL;\n\n  // handle filename that starts with \"file://\"\n  var fileSchema = 'file://';\n  if (fileName.indexOf(fileSchema) === 0) {\n    fileName = fileURLToPath(fileName);\n  }\n\n  return fileName;\n};\n\n/**\n * Gets the root directory of a module, given an arbitrary filename\n * somewhere in the module tree. The \"root directory\" is the directory\n * containing the `package.json` file.\n *\n *   In:  /home/nate/node-native-module/lib/index.js\n *   Out: /home/nate/node-native-module\n */\n\nexports.getRoot = function getRoot(file) {\n  var dir = dirname(file),\n    prev;\n  while (true) {\n    if (dir === '.') {\n      // Avoids an infinite loop in rare cases, like the REPL\n      dir = process.cwd();\n    }\n    if (\n      exists(join(dir, 'package.json')) ||\n      exists(join(dir, 'node_modules'))\n    ) {\n      // Found the 'package.json' file or 'node_modules' dir; we're done\n      return dir;\n    }\n    if (prev === dir) {\n      // Got to the top\n      throw new Error(\n        'Could not find module root given file: \"' +\n          file +\n          '\". Do you have a `package.json` file? '\n      );\n    }\n    // Try the parent dir next\n    prev = dir;\n    dir = join(dir, '..');\n  }\n};\n","'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));","'use strict';\n\nconst EventEmitter = require('events');\nconst { setTimeout, clearTimeout } = require('timers');\nconst fetch = require('node-fetch');\nconst transports = require('./transports');\nconst { RPCCommands, RPCEvents, RelationshipTypes } = require('./constants');\nconst { pid: getPid, uuid } = require('./util');\n\nfunction subKey(event, args) {\n  return `${event}${JSON.stringify(args)}`;\n}\n\n/**\n * @typedef {RPCClientOptions}\n * @extends {ClientOptions}\n * @prop {string} transport RPC transport. one of `ipc` or `websocket`\n */\n\n/**\n * The main hub for interacting with Discord RPC\n * @extends {BaseClient}\n */\nclass RPCClient extends EventEmitter {\n  /**\n   * @param {RPCClientOptions} [options] Options for the client.\n   * You must provide a transport\n   */\n  constructor(options = {}) {\n    super();\n\n    this.options = options;\n\n    this.accessToken = null;\n    this.clientId = null;\n\n    /**\n     * Application used in this client\n     * @type {?ClientApplication}\n     */\n    this.application = null;\n\n    /**\n     * User used in this application\n     * @type {?User}\n     */\n    this.user = null;\n\n    const Transport = transports[options.transport];\n    if (!Transport) {\n      throw new TypeError('RPC_INVALID_TRANSPORT', options.transport);\n    }\n\n    this.fetch = (method, path, { data, query } = {}) =>\n      fetch(`${this.fetch.endpoint}${path}${query ? new URLSearchParams(query) : ''}`, {\n        method,\n        body: data,\n        headers: {\n          Authorization: `Bearer ${this.accessToken}`,\n        },\n      }).then(async (r) => {\n        const body = await r.json();\n        if (!r.ok) {\n          const e = new Error(r.status);\n          e.body = body;\n          throw e;\n        }\n        return body;\n      });\n\n    this.fetch.endpoint = 'https://discord.com/api';\n\n    /**\n     * Raw transport userd\n     * @type {RPCTransport}\n     * @private\n     */\n    this.transport = new Transport(this);\n    this.transport.on('message', this._onRpcMessage.bind(this));\n\n    /**\n     * Map of nonces being expected from the transport\n     * @type {Map}\n     * @private\n     */\n    this._expecting = new Map();\n\n    this._connectPromise = undefined;\n  }\n\n  /**\n   * Search and connect to RPC\n   */\n  connect(clientId) {\n    if (this._connectPromise) {\n      return this._connectPromise;\n    }\n    this._connectPromise = new Promise((resolve, reject) => {\n      this.clientId = clientId;\n      const timeout = setTimeout(() => reject(new Error('RPC_CONNECTION_TIMEOUT')), 10e3);\n      timeout.unref();\n      this.once('connected', () => {\n        clearTimeout(timeout);\n        resolve(this);\n      });\n      this.transport.once('close', () => {\n        this._expecting.forEach((e) => {\n          e.reject(new Error('connection closed'));\n        });\n        this.emit('disconnected');\n        reject(new Error('connection closed'));\n      });\n      this.transport.connect().catch(reject);\n    });\n    return this._connectPromise;\n  }\n\n  /**\n   * @typedef {RPCLoginOptions}\n   * @param {string} clientId Client ID\n   * @param {string} [clientSecret] Client secret\n   * @param {string} [accessToken] Access token\n   * @param {string} [rpcToken] RPC token\n   * @param {string} [tokenEndpoint] Token endpoint\n   * @param {string[]} [scopes] Scopes to authorize with\n   */\n\n  /**\n   * Performs authentication flow. Automatically calls Client#connect if needed.\n   * @param {RPCLoginOptions} options Options for authentication.\n   * At least one property must be provided to perform login.\n   * @example client.login({ clientId: '1234567', clientSecret: 'abcdef123' });\n   * @returns {Promise<RPCClient>}\n   */\n  async login(options = {}) {\n    let { clientId, accessToken } = options;\n    await this.connect(clientId);\n    if (!options.scopes) {\n      this.emit('ready');\n      return this;\n    }\n    if (!accessToken) {\n      accessToken = await this.authorize(options);\n    }\n    return this.authenticate(accessToken);\n  }\n\n  /**\n   * Request\n   * @param {string} cmd Command\n   * @param {Object} [args={}] Arguments\n   * @param {string} [evt] Event\n   * @returns {Promise}\n   * @private\n   */\n  request(cmd, args, evt) {\n    return new Promise((resolve, reject) => {\n      const nonce = uuid();\n      this.transport.send({ cmd, args, evt, nonce });\n      this._expecting.set(nonce, { resolve, reject });\n    });\n  }\n\n  /**\n   * Message handler\n   * @param {Object} message message\n   * @private\n   */\n  _onRpcMessage(message) {\n    if (message.cmd === RPCCommands.DISPATCH && message.evt === RPCEvents.READY) {\n      if (message.data.user) {\n        this.user = message.data.user;\n      }\n      this.emit('connected');\n    } else if (this._expecting.has(message.nonce)) {\n      const { resolve, reject } = this._expecting.get(message.nonce);\n      if (message.evt === 'ERROR') {\n        const e = new Error(message.data.message);\n        e.code = message.data.code;\n        e.data = message.data;\n        reject(e);\n      } else {\n        resolve(message.data);\n      }\n      this._expecting.delete(message.nonce);\n    } else {\n      this.emit(message.evt, message.data);\n    }\n  }\n\n  /**\n   * Authorize\n   * @param {Object} options options\n   * @returns {Promise}\n   * @private\n   */\n  async authorize({ scopes, clientSecret, rpcToken, redirectUri, prompt } = {}) {\n    if (clientSecret && rpcToken === true) {\n      const body = await this.fetch('POST', '/oauth2/token/rpc', {\n        data: new URLSearchParams({\n          client_id: this.clientId,\n          client_secret: clientSecret,\n        }),\n      });\n      rpcToken = body.rpc_token;\n    }\n\n    const { code } = await this.request('AUTHORIZE', {\n      scopes,\n      client_id: this.clientId,\n      prompt,\n      rpc_token: rpcToken,\n    });\n\n    const response = await this.fetch('POST', '/oauth2/token', {\n      data: new URLSearchParams({\n        client_id: this.clientId,\n        client_secret: clientSecret,\n        code,\n        grant_type: 'authorization_code',\n        redirect_uri: redirectUri,\n      }),\n    });\n\n    return response.access_token;\n  }\n\n  /**\n   * Authenticate\n   * @param {string} accessToken access token\n   * @returns {Promise}\n   * @private\n   */\n  authenticate(accessToken) {\n    return this.request('AUTHENTICATE', { access_token: accessToken })\n      .then(({ application, user }) => {\n        this.accessToken = accessToken;\n        this.application = application;\n        this.user = user;\n        this.emit('ready');\n        return this;\n      });\n  }\n\n\n  /**\n   * Fetch a guild\n   * @param {Snowflake} id Guild ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Guild>}\n   */\n  getGuild(id, timeout) {\n    return this.request(RPCCommands.GET_GUILD, { guild_id: id, timeout });\n  }\n\n  /**\n   * Fetch all guilds\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Collection<Snowflake, Guild>>}\n   */\n  getGuilds(timeout) {\n    return this.request(RPCCommands.GET_GUILDS, { timeout });\n  }\n\n  /**\n   * Get a channel\n   * @param {Snowflake} id Channel ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Channel>}\n   */\n  getChannel(id, timeout) {\n    return this.request(RPCCommands.GET_CHANNEL, { channel_id: id, timeout });\n  }\n\n  /**\n   * Get all channels\n   * @param {Snowflake} [id] Guild ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Collection<Snowflake, Channel>>}\n   */\n  async getChannels(id, timeout) {\n    const { channels } = await this.request(RPCCommands.GET_CHANNELS, {\n      timeout,\n      guild_id: id,\n    });\n    return channels;\n  }\n\n  /**\n   * @typedef {CertifiedDevice}\n   * @prop {string} type One of `AUDIO_INPUT`, `AUDIO_OUTPUT`, `VIDEO_INPUT`\n   * @prop {string} uuid This device's Windows UUID\n   * @prop {object} vendor Vendor information\n   * @prop {string} vendor.name Vendor's name\n   * @prop {string} vendor.url Vendor's url\n   * @prop {object} model Model information\n   * @prop {string} model.name Model's name\n   * @prop {string} model.url Model's url\n   * @prop {string[]} related Array of related product's Windows UUIDs\n   * @prop {boolean} echoCancellation If the device has echo cancellation\n   * @prop {boolean} noiseSuppression If the device has noise suppression\n   * @prop {boolean} automaticGainControl If the device has automatic gain control\n   * @prop {boolean} hardwareMute If the device has a hardware mute\n   */\n\n  /**\n   * Tell discord which devices are certified\n   * @param {CertifiedDevice[]} devices Certified devices to send to discord\n   * @returns {Promise}\n   */\n  setCertifiedDevices(devices) {\n    return this.request(RPCCommands.SET_CERTIFIED_DEVICES, {\n      devices: devices.map((d) => ({\n        type: d.type,\n        id: d.uuid,\n        vendor: d.vendor,\n        model: d.model,\n        related: d.related,\n        echo_cancellation: d.echoCancellation,\n        noise_suppression: d.noiseSuppression,\n        automatic_gain_control: d.automaticGainControl,\n        hardware_mute: d.hardwareMute,\n      })),\n    });\n  }\n\n  /**\n   * @typedef {UserVoiceSettings}\n   * @prop {Snowflake} id ID of the user these settings apply to\n   * @prop {?Object} [pan] Pan settings, an object with `left` and `right` set between\n   * 0.0 and 1.0, inclusive\n   * @prop {?number} [volume=100] The volume\n   * @prop {bool} [mute] If the user is muted\n   */\n\n  /**\n   * Set the voice settings for a user, by id\n   * @param {Snowflake} id ID of the user to set\n   * @param {UserVoiceSettings} settings Settings\n   * @returns {Promise}\n   */\n  setUserVoiceSettings(id, settings) {\n    return this.request(RPCCommands.SET_USER_VOICE_SETTINGS, {\n      user_id: id,\n      pan: settings.pan,\n      mute: settings.mute,\n      volume: settings.volume,\n    });\n  }\n\n  /**\n   * Move the user to a voice channel\n   * @param {Snowflake} id ID of the voice channel\n   * @param {Object} [options] Options\n   * @param {number} [options.timeout] Timeout for the command\n   * @param {boolean} [options.force] Force this move. This should only be done if you\n   * have explicit permission from the user.\n   * @returns {Promise}\n   */\n  selectVoiceChannel(id, { timeout, force = false } = {}) {\n    return this.request(RPCCommands.SELECT_VOICE_CHANNEL, { channel_id: id, timeout, force });\n  }\n\n  /**\n   * Move the user to a text channel\n   * @param {Snowflake} id ID of the voice channel\n   * @param {Object} [options] Options\n   * @param {number} [options.timeout] Timeout for the command\n   * have explicit permission from the user.\n   * @returns {Promise}\n   */\n  selectTextChannel(id, { timeout } = {}) {\n    return this.request(RPCCommands.SELECT_TEXT_CHANNEL, { channel_id: id, timeout });\n  }\n\n  /**\n   * Get current voice settings\n   * @returns {Promise}\n   */\n  getVoiceSettings() {\n    return this.request(RPCCommands.GET_VOICE_SETTINGS)\n      .then((s) => ({\n        automaticGainControl: s.automatic_gain_control,\n        echoCancellation: s.echo_cancellation,\n        noiseSuppression: s.noise_suppression,\n        qos: s.qos,\n        silenceWarning: s.silence_warning,\n        deaf: s.deaf,\n        mute: s.mute,\n        input: {\n          availableDevices: s.input.available_devices,\n          device: s.input.device_id,\n          volume: s.input.volume,\n        },\n        output: {\n          availableDevices: s.output.available_devices,\n          device: s.output.device_id,\n          volume: s.output.volume,\n        },\n        mode: {\n          type: s.mode.type,\n          autoThreshold: s.mode.auto_threshold,\n          threshold: s.mode.threshold,\n          shortcut: s.mode.shortcut,\n          delay: s.mode.delay,\n        },\n      }));\n  }\n\n  /**\n   * Set current voice settings, overriding the current settings until this session disconnects.\n   * This also locks the settings for any other rpc sessions which may be connected.\n   * @param {Object} args Settings\n   * @returns {Promise}\n   */\n  setVoiceSettings(args) {\n    return this.request(RPCCommands.SET_VOICE_SETTINGS, {\n      automatic_gain_control: args.automaticGainControl,\n      echo_cancellation: args.echoCancellation,\n      noise_suppression: args.noiseSuppression,\n      qos: args.qos,\n      silence_warning: args.silenceWarning,\n      deaf: args.deaf,\n      mute: args.mute,\n      input: args.input ? {\n        device_id: args.input.device,\n        volume: args.input.volume,\n      } : undefined,\n      output: args.output ? {\n        device_id: args.output.device,\n        volume: args.output.volume,\n      } : undefined,\n      mode: args.mode ? {\n        type: args.mode.type,\n        auto_threshold: args.mode.autoThreshold,\n        threshold: args.mode.threshold,\n        shortcut: args.mode.shortcut,\n        delay: args.mode.delay,\n      } : undefined,\n    });\n  }\n\n  /**\n   * Capture a shortcut using the client\n   * The callback takes (key, stop) where `stop` is a function that will stop capturing.\n   * This `stop` function must be called before disconnecting or else the user will have\n   * to restart their client.\n   * @param {Function} callback Callback handling keys\n   * @returns {Promise<Function>}\n   */\n  captureShortcut(callback) {\n    const subid = subKey(RPCEvents.CAPTURE_SHORTCUT_CHANGE);\n    const stop = () => {\n      this._subscriptions.delete(subid);\n      return this.request(RPCCommands.CAPTURE_SHORTCUT, { action: 'STOP' });\n    };\n    this._subscriptions.set(subid, ({ shortcut }) => {\n      callback(shortcut, stop);\n    });\n    return this.request(RPCCommands.CAPTURE_SHORTCUT, { action: 'START' })\n      .then(() => stop);\n  }\n\n  /**\n   * Sets the presence for the logged in user.\n   * @param {object} args The rich presence to pass.\n   * @param {number} [pid] The application's process ID. Defaults to the executing process' PID.\n   * @returns {Promise}\n   */\n  setActivity(args = {}, pid = getPid()) {\n    let timestamps;\n    let assets;\n    let party;\n    let secrets;\n    if (args.startTimestamp || args.endTimestamp) {\n      timestamps = {\n        start: args.startTimestamp,\n        end: args.endTimestamp,\n      };\n      if (timestamps.start instanceof Date) {\n        timestamps.start = Math.round(timestamps.start.getTime());\n      }\n      if (timestamps.end instanceof Date) {\n        timestamps.end = Math.round(timestamps.end.getTime());\n      }\n      if (timestamps.start > 2147483647000) {\n        throw new RangeError('timestamps.start must fit into a unix timestamp');\n      }\n      if (timestamps.end > 2147483647000) {\n        throw new RangeError('timestamps.end must fit into a unix timestamp');\n      }\n    }\n    if (\n      args.largeImageKey || args.largeImageText\n      || args.smallImageKey || args.smallImageText\n    ) {\n      assets = {\n        large_image: args.largeImageKey,\n        large_text: args.largeImageText,\n        small_image: args.smallImageKey,\n        small_text: args.smallImageText,\n      };\n    }\n    if (args.partySize || args.partyId || args.partyMax) {\n      party = { id: args.partyId };\n      if (args.partySize || args.partyMax) {\n        party.size = [args.partySize, args.partyMax];\n      }\n    }\n    if (args.matchSecret || args.joinSecret || args.spectateSecret) {\n      secrets = {\n        match: args.matchSecret,\n        join: args.joinSecret,\n        spectate: args.spectateSecret,\n      };\n    }\n\n    return this.request(RPCCommands.SET_ACTIVITY, {\n      pid,\n      activity: {\n        state: args.state,\n        details: args.details,\n        timestamps,\n        assets,\n        party,\n        secrets,\n        buttons: args.buttons,\n        instance: !!args.instance,\n      },\n    });\n  }\n\n  /**\n   * Clears the currently set presence, if any. This will hide the \"Playing X\" message\n   * displayed below the user's name.\n   * @param {number} [pid] The application's process ID. Defaults to the executing process' PID.\n   * @returns {Promise}\n   */\n  clearActivity(pid = getPid()) {\n    return this.request(RPCCommands.SET_ACTIVITY, {\n      pid,\n    });\n  }\n\n  /**\n   * Invite a user to join the game the RPC user is currently playing\n   * @param {User} user The user to invite\n   * @returns {Promise}\n   */\n  sendJoinInvite(user) {\n    return this.request(RPCCommands.SEND_ACTIVITY_JOIN_INVITE, {\n      user_id: user.id || user,\n    });\n  }\n\n  /**\n   * Request to join the game the user is playing\n   * @param {User} user The user whose game you want to request to join\n   * @returns {Promise}\n   */\n  sendJoinRequest(user) {\n    return this.request(RPCCommands.SEND_ACTIVITY_JOIN_REQUEST, {\n      user_id: user.id || user,\n    });\n  }\n\n  /**\n   * Reject a join request from a user\n   * @param {User} user The user whose request you wish to reject\n   * @returns {Promise}\n   */\n  closeJoinRequest(user) {\n    return this.request(RPCCommands.CLOSE_ACTIVITY_JOIN_REQUEST, {\n      user_id: user.id || user,\n    });\n  }\n\n  createLobby(type, capacity, metadata) {\n    return this.request(RPCCommands.CREATE_LOBBY, {\n      type,\n      capacity,\n      metadata,\n    });\n  }\n\n  updateLobby(lobby, { type, owner, capacity, metadata } = {}) {\n    return this.request(RPCCommands.UPDATE_LOBBY, {\n      id: lobby.id || lobby,\n      type,\n      owner_id: (owner && owner.id) || owner,\n      capacity,\n      metadata,\n    });\n  }\n\n  deleteLobby(lobby) {\n    return this.request(RPCCommands.DELETE_LOBBY, {\n      id: lobby.id || lobby,\n    });\n  }\n\n  connectToLobby(id, secret) {\n    return this.request(RPCCommands.CONNECT_TO_LOBBY, {\n      id,\n      secret,\n    });\n  }\n\n  sendToLobby(lobby, data) {\n    return this.request(RPCCommands.SEND_TO_LOBBY, {\n      id: lobby.id || lobby,\n      data,\n    });\n  }\n\n  disconnectFromLobby(lobby) {\n    return this.request(RPCCommands.DISCONNECT_FROM_LOBBY, {\n      id: lobby.id || lobby,\n    });\n  }\n\n  updateLobbyMember(lobby, user, metadata) {\n    return this.request(RPCCommands.UPDATE_LOBBY_MEMBER, {\n      lobby_id: lobby.id || lobby,\n      user_id: user.id || user,\n      metadata,\n    });\n  }\n\n  getRelationships() {\n    const types = Object.keys(RelationshipTypes);\n    return this.request(RPCCommands.GET_RELATIONSHIPS)\n      .then((o) => o.relationships.map((r) => ({\n        ...r,\n        type: types[r.type],\n      })));\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {string} event Name of event e.g. `MESSAGE_CREATE`\n   * @param {Object} [args] Args for event e.g. `{ channel_id: '1234' }`\n   * @returns {Promise<Object>}\n   */\n  async subscribe(event, args) {\n    await this.request(RPCCommands.SUBSCRIBE, args, event);\n    return {\n      unsubscribe: () => this.request(RPCCommands.UNSUBSCRIBE, args, event),\n    };\n  }\n\n  /**\n   * Destroy the client\n   */\n  async destroy() {\n    await this.transport.close();\n  }\n}\n\nmodule.exports = RPCClient;\n","'use strict';\n\nfunction keyMirror(arr) {\n  const tmp = {};\n  for (const value of arr) {\n    tmp[value] = value;\n  }\n  return tmp;\n}\n\n\nexports.browser = typeof window !== 'undefined';\n\nexports.RPCCommands = keyMirror([\n  'DISPATCH',\n  'AUTHORIZE',\n  'AUTHENTICATE',\n  'GET_GUILD',\n  'GET_GUILDS',\n  'GET_CHANNEL',\n  'GET_CHANNELS',\n  'CREATE_CHANNEL_INVITE',\n  'GET_RELATIONSHIPS',\n  'GET_USER',\n  'SUBSCRIBE',\n  'UNSUBSCRIBE',\n  'SET_USER_VOICE_SETTINGS',\n  'SET_USER_VOICE_SETTINGS_2',\n  'SELECT_VOICE_CHANNEL',\n  'GET_SELECTED_VOICE_CHANNEL',\n  'SELECT_TEXT_CHANNEL',\n  'GET_VOICE_SETTINGS',\n  'SET_VOICE_SETTINGS_2',\n  'SET_VOICE_SETTINGS',\n  'CAPTURE_SHORTCUT',\n  'SET_ACTIVITY',\n  'SEND_ACTIVITY_JOIN_INVITE',\n  'CLOSE_ACTIVITY_JOIN_REQUEST',\n  'ACTIVITY_INVITE_USER',\n  'ACCEPT_ACTIVITY_INVITE',\n  'INVITE_BROWSER',\n  'DEEP_LINK',\n  'CONNECTIONS_CALLBACK',\n  'BRAINTREE_POPUP_BRIDGE_CALLBACK',\n  'GIFT_CODE_BROWSER',\n  'GUILD_TEMPLATE_BROWSER',\n  'OVERLAY',\n  'BROWSER_HANDOFF',\n  'SET_CERTIFIED_DEVICES',\n  'GET_IMAGE',\n  'CREATE_LOBBY',\n  'UPDATE_LOBBY',\n  'DELETE_LOBBY',\n  'UPDATE_LOBBY_MEMBER',\n  'CONNECT_TO_LOBBY',\n  'DISCONNECT_FROM_LOBBY',\n  'SEND_TO_LOBBY',\n  'SEARCH_LOBBIES',\n  'CONNECT_TO_LOBBY_VOICE',\n  'DISCONNECT_FROM_LOBBY_VOICE',\n  'SET_OVERLAY_LOCKED',\n  'OPEN_OVERLAY_ACTIVITY_INVITE',\n  'OPEN_OVERLAY_GUILD_INVITE',\n  'OPEN_OVERLAY_VOICE_SETTINGS',\n  'VALIDATE_APPLICATION',\n  'GET_ENTITLEMENT_TICKET',\n  'GET_APPLICATION_TICKET',\n  'START_PURCHASE',\n  'GET_SKUS',\n  'GET_ENTITLEMENTS',\n  'GET_NETWORKING_CONFIG',\n  'NETWORKING_SYSTEM_METRICS',\n  'NETWORKING_PEER_METRICS',\n  'NETWORKING_CREATE_TOKEN',\n  'SET_USER_ACHIEVEMENT',\n  'GET_USER_ACHIEVEMENTS',\n]);\n\nexports.RPCEvents = keyMirror([\n  'CURRENT_USER_UPDATE',\n  'GUILD_STATUS',\n  'GUILD_CREATE',\n  'CHANNEL_CREATE',\n  'RELATIONSHIP_UPDATE',\n  'VOICE_CHANNEL_SELECT',\n  'VOICE_STATE_CREATE',\n  'VOICE_STATE_DELETE',\n  'VOICE_STATE_UPDATE',\n  'VOICE_SETTINGS_UPDATE',\n  'VOICE_SETTINGS_UPDATE_2',\n  'VOICE_CONNECTION_STATUS',\n  'SPEAKING_START',\n  'SPEAKING_STOP',\n  'GAME_JOIN',\n  'GAME_SPECTATE',\n  'ACTIVITY_JOIN',\n  'ACTIVITY_JOIN_REQUEST',\n  'ACTIVITY_SPECTATE',\n  'ACTIVITY_INVITE',\n  'NOTIFICATION_CREATE',\n  'MESSAGE_CREATE',\n  'MESSAGE_UPDATE',\n  'MESSAGE_DELETE',\n  'LOBBY_DELETE',\n  'LOBBY_UPDATE',\n  'LOBBY_MEMBER_CONNECT',\n  'LOBBY_MEMBER_DISCONNECT',\n  'LOBBY_MEMBER_UPDATE',\n  'LOBBY_MESSAGE',\n  'CAPTURE_SHORTCUT_CHANGE',\n  'OVERLAY',\n  'OVERLAY_UPDATE',\n  'ENTITLEMENT_CREATE',\n  'ENTITLEMENT_DELETE',\n  'USER_ACHIEVEMENT_UPDATE',\n  'READY',\n  'ERROR',\n]);\n\nexports.RPCErrors = {\n  CAPTURE_SHORTCUT_ALREADY_LISTENING: 5004,\n  GET_GUILD_TIMED_OUT: 5002,\n  INVALID_ACTIVITY_JOIN_REQUEST: 4012,\n  INVALID_ACTIVITY_SECRET: 5005,\n  INVALID_CHANNEL: 4005,\n  INVALID_CLIENTID: 4007,\n  INVALID_COMMAND: 4002,\n  INVALID_ENTITLEMENT: 4015,\n  INVALID_EVENT: 4004,\n  INVALID_GIFT_CODE: 4016,\n  INVALID_GUILD: 4003,\n  INVALID_INVITE: 4011,\n  INVALID_LOBBY: 4013,\n  INVALID_LOBBY_SECRET: 4014,\n  INVALID_ORIGIN: 4008,\n  INVALID_PAYLOAD: 4000,\n  INVALID_PERMISSIONS: 4006,\n  INVALID_TOKEN: 4009,\n  INVALID_USER: 4010,\n  LOBBY_FULL: 5007,\n  NO_ELIGIBLE_ACTIVITY: 5006,\n  OAUTH2_ERROR: 5000,\n  PURCHASE_CANCELED: 5008,\n  PURCHASE_ERROR: 5009,\n  RATE_LIMITED: 5011,\n  SELECT_CHANNEL_TIMED_OUT: 5001,\n  SELECT_VOICE_FORCE_REQUIRED: 5003,\n  SERVICE_UNAVAILABLE: 1001,\n  TRANSACTION_ABORTED: 1002,\n  UNAUTHORIZED_FOR_ACHIEVEMENT: 5010,\n  UNKNOWN_ERROR: 1000,\n};\n\nexports.RPCCloseCodes = {\n  CLOSE_NORMAL: 1000,\n  CLOSE_UNSUPPORTED: 1003,\n  CLOSE_ABNORMAL: 1006,\n  INVALID_CLIENTID: 4000,\n  INVALID_ORIGIN: 4001,\n  RATELIMITED: 4002,\n  TOKEN_REVOKED: 4003,\n  INVALID_VERSION: 4004,\n  INVALID_ENCODING: 4005,\n};\n\nexports.LobbyTypes = {\n  PRIVATE: 1,\n  PUBLIC: 2,\n};\n\nexports.RelationshipTypes = {\n  NONE: 0,\n  FRIEND: 1,\n  BLOCKED: 2,\n  PENDING_INCOMING: 3,\n  PENDING_OUTGOING: 4,\n  IMPLICIT: 5,\n};\n","'use strict';\n\nconst util = require('./util');\n\nmodule.exports = {\n  Client: require('./client'),\n  register(id) {\n    return util.register(`discord-${id}`);\n  },\n};\n","'use strict';\n\nmodule.exports = {\n  ipc: require('./ipc'),\n  websocket: require('./websocket'),\n};\n","'use strict';\n\nconst net = require('net');\nconst EventEmitter = require('events');\nconst fetch = require('node-fetch');\nconst { uuid } = require('../util');\n\nconst OPCodes = {\n  HANDSHAKE: 0,\n  FRAME: 1,\n  CLOSE: 2,\n  PING: 3,\n  PONG: 4,\n};\n\nfunction getIPCPath(id) {\n  if (process.platform === 'win32') {\n    return `\\\\\\\\?\\\\pipe\\\\discord-ipc-${id}`;\n  }\n  const { env: { XDG_RUNTIME_DIR, TMPDIR, TMP, TEMP } } = process;\n  const prefix = XDG_RUNTIME_DIR || TMPDIR || TMP || TEMP || '/tmp';\n  return `${prefix.replace(/\\/$/, '')}/discord-ipc-${id}`;\n}\n\nfunction getIPC(id = 0) {\n  return new Promise((resolve, reject) => {\n    const path = getIPCPath(id);\n    const onerror = () => {\n      if (id < 10) {\n        resolve(getIPC(id + 1));\n      } else {\n        reject(new Error('Could not connect'));\n      }\n    };\n    const sock = net.createConnection(path, () => {\n      sock.removeListener('error', onerror);\n      resolve(sock);\n    });\n    sock.once('error', onerror);\n  });\n}\n\nasync function findEndpoint(tries = 0) {\n  if (tries > 30) {\n    throw new Error('Could not find endpoint');\n  }\n  const endpoint = `http://127.0.0.1:${6463 + (tries % 10)}`;\n  try {\n    const r = await fetch(endpoint);\n    if (r.status === 404) {\n      return endpoint;\n    }\n    return findEndpoint(tries + 1);\n  } catch (e) {\n    return findEndpoint(tries + 1);\n  }\n}\n\nfunction encode(op, data) {\n  data = JSON.stringify(data);\n  const len = Buffer.byteLength(data);\n  const packet = Buffer.alloc(8 + len);\n  packet.writeInt32LE(op, 0);\n  packet.writeInt32LE(len, 4);\n  packet.write(data, 8, len);\n  return packet;\n}\n\nconst working = {\n  full: '',\n  op: undefined,\n};\n\nfunction decode(socket, callback) {\n  const packet = socket.read();\n  if (!packet) {\n    return;\n  }\n\n  let { op } = working;\n  let raw;\n  if (working.full === '') {\n    op = working.op = packet.readInt32LE(0);\n    const len = packet.readInt32LE(4);\n    raw = packet.slice(8, len + 8);\n  } else {\n    raw = packet.toString();\n  }\n\n  try {\n    const data = JSON.parse(working.full + raw);\n    callback({ op, data }); // eslint-disable-line callback-return\n    working.full = '';\n    working.op = undefined;\n  } catch (err) {\n    working.full += raw;\n  }\n\n  decode(socket, callback);\n}\n\nclass IPCTransport extends EventEmitter {\n  constructor(client) {\n    super();\n    this.client = client;\n    this.socket = null;\n  }\n\n  async connect() {\n    const socket = this.socket = await getIPC();\n    socket.on('close', this.onClose.bind(this));\n    socket.on('error', this.onClose.bind(this));\n    this.emit('open');\n    socket.write(encode(OPCodes.HANDSHAKE, {\n      v: 1,\n      client_id: this.client.clientId,\n    }));\n    socket.pause();\n    socket.on('readable', () => {\n      decode(socket, ({ op, data }) => {\n        switch (op) {\n          case OPCodes.PING:\n            this.send(data, OPCodes.PONG);\n            break;\n          case OPCodes.FRAME:\n            if (!data) {\n              return;\n            }\n            if (data.cmd === 'AUTHORIZE' && data.evt !== 'ERROR') {\n              findEndpoint()\n                .then((endpoint) => {\n                  this.client.request.endpoint = endpoint;\n                })\n                .catch((e) => {\n                  this.client.emit('error', e);\n                });\n            }\n            this.emit('message', data);\n            break;\n          case OPCodes.CLOSE:\n            this.emit('close', data);\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  onClose(e) {\n    this.emit('close', e);\n  }\n\n  send(data, op = OPCodes.FRAME) {\n    this.socket.write(encode(op, data));\n  }\n\n  async close() {\n    return new Promise((r) => {\n      this.once('close', r);\n      this.send({}, OPCodes.CLOSE);\n      this.socket.end();\n    });\n  }\n\n  ping() {\n    this.send(uuid(), OPCodes.PING);\n  }\n}\n\nmodule.exports = IPCTransport;\nmodule.exports.encode = encode;\nmodule.exports.decode = decode;\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { browser } = require('../constants');\n\n// eslint-disable-next-line\nconst WebSocket = browser ? window.WebSocket : require('ws');\n\nconst pack = (d) => JSON.stringify(d);\nconst unpack = (s) => JSON.parse(s);\n\nclass WebSocketTransport extends EventEmitter {\n  constructor(client) {\n    super();\n    this.client = client;\n    this.ws = null;\n    this.tries = 0;\n  }\n\n  async connect() {\n    const port = 6463 + (this.tries % 10);\n    this.tries += 1;\n\n    this.ws = new WebSocket(\n      `ws://127.0.0.1:${port}/?v=1&client_id=${this.client.clientId}`,\n      browser ? undefined : { origin: this.client.options.origin },\n    );\n    this.ws.onopen = this.onOpen.bind(this);\n    this.ws.onclose = this.onClose.bind(this);\n    this.ws.onerror = this.onError.bind(this);\n    this.ws.onmessage = this.onMessage.bind(this);\n  }\n\n  onOpen() {\n    this.emit('open');\n  }\n\n  onClose(event) {\n    if (!event.wasClean) {\n      return;\n    }\n    this.emit('close', event);\n  }\n\n  onError(event) {\n    try {\n      this.ws.close();\n    } catch {} // eslint-disable-line no-empty\n\n    if (this.tries > 20) {\n      this.emit('error', event.error);\n    } else {\n      setTimeout(() => {\n        this.connect();\n      }, 250);\n    }\n  }\n\n  onMessage(event) {\n    this.emit('message', unpack(event.data));\n  }\n\n  send(data) {\n    this.ws.send(pack(data));\n  }\n\n  ping() {} // eslint-disable-line no-empty-function\n\n  close() {\n    return new Promise((r) => {\n      this.once('close', r);\n      this.ws.close();\n    });\n  }\n}\n\nmodule.exports = WebSocketTransport;\n","'use strict';\n\nlet register;\ntry {\n  const { app } = require('electron');\n  register = app.setAsDefaultProtocolClient.bind(app);\n} catch (err) {\n  try {\n    register = require('register-scheme');\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\nif (typeof register !== 'function') {\n  register = () => false;\n}\n\nfunction pid() {\n  if (typeof process !== 'undefined') {\n    return process.pid;\n  }\n  return null;\n}\n\nconst uuid4122 = () => {\n  let uuid = '';\n  for (let i = 0; i < 32; i += 1) {\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      uuid += '-';\n    }\n    let n;\n    if (i === 12) {\n      n = 4;\n    } else {\n      const random = Math.random() * 16 | 0;\n      if (i === 16) {\n        n = (random & 3) | 0;\n      } else {\n        n = random;\n      }\n    }\n    uuid += n.toString(16);\n  }\n  return uuid;\n};\n\nmodule.exports = {\n  pid,\n  register,\n  uuid: uuid4122,\n};\n","\n/**\n * Module dependencies.\n */\n\nvar sep = require('path').sep || '/';\n\n/**\n * Module exports.\n */\n\nmodule.exports = fileUriToPath;\n\n/**\n * File URI to Path function.\n *\n * @param {String} uri\n * @return {String} path\n * @api public\n */\n\nfunction fileUriToPath (uri) {\n  if ('string' != typeof uri ||\n      uri.length <= 7 ||\n      'file://' != uri.substring(0, 7)) {\n    throw new TypeError('must pass in a file:// URI to convert to a file path');\n  }\n\n  var rest = decodeURI(uri.substring(7));\n  var firstSlash = rest.indexOf('/');\n  var host = rest.substring(0, firstSlash);\n  var path = rest.substring(firstSlash + 1);\n\n  // 2.  Scheme Definition\n  // As a special case, <host> can be the string \"localhost\" or the empty\n  // string; this is interpreted as \"the machine from which the URL is\n  // being interpreted\".\n  if ('localhost' == host) host = '';\n\n  if (host) {\n    host = sep + sep + host;\n  }\n\n  // 3.2  Drives, drive letters, mount points, file system root\n  // Drive letters are mapped into the top of a file URI in various ways,\n  // depending on the implementation; some applications substitute\n  // vertical bar (\"|\") for the colon after the drive letter, yielding\n  // \"file:///c|/tmp/test.txt\".  In some cases, the colon is left\n  // unchanged, as in \"file:///c:/tmp/test.txt\".  In other cases, the\n  // colon is simply omitted, as in \"file:///c/tmp/test.txt\".\n  path = path.replace(/^(.+)\\|/, '$1:');\n\n  // for Windows, we need to invert the path separators from what a URI uses\n  if (sep == '\\\\') {\n    path = path.replace(/\\//g, '\\\\');\n  }\n\n  if (/^.+\\:/.test(path)) {\n    // has Windows drive at beginning of path\n  } else {\n    // unix path\n    path = sep + path;\n  }\n\n  return host + path;\n}\n","const runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\nif (typeof runtimeRequire.addon === 'function') { // if the platform supports native resolving prefer that\n  module.exports = runtimeRequire.addon.bind(runtimeRequire)\n} else { // else use the runtime version here\n  module.exports = require('./node-gyp-build.js')\n}\n","var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : (isNwjs() ? 'node-webkit' : 'node')\n\nvar arch = process.env.npm_config_arch || os.arch()\nvar platform = process.env.npm_config_platform || os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.resolve(dir))\n}\n\nload.resolve = load.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime && tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi && tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isNwjs () {\n  return !!(process.versions && process.versions.nw)\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n","module.exports = require('bindings')('register-protocol-handler').registerProtocolHandler;\n","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","import { basename, parse, sep } from 'path';\nimport { debug, env, Selection, TextDocument, window, workspace } from 'vscode';\n\nimport {\n\tCONFIG_KEYS,\n\tDEBUG_IMAGE_KEY,\n\tEMPTY,\n\tFAKE_EMPTY,\n\tFILE_SIZES,\n\tIDLE_IMAGE_KEY,\n\tREPLACE_KEYS,\n\tUNKNOWN_GIT_BRANCH,\n\tUNKNOWN_GIT_REPO_NAME,\n\tVSCODE_IMAGE_KEY,\n\tVSCODE_INSIDERS_IMAGE_KEY,\n} from './constants';\nimport { log, LogLevel } from './logger';\nimport { getConfig, getGit, resolveFileIcon, toLower, toTitle, toUpper } from './util';\n\ninterface ActivityPayload {\n\tdetails?: string | undefined;\n\tstate?: string | undefined;\n\tstartTimestamp?: number | null | undefined;\n\tlargeImageKey?: string | undefined;\n\tlargeImageText?: string | undefined;\n\tsmallImageKey?: string | undefined;\n\tsmallImageText?: string | undefined;\n\tpartyId?: string | undefined;\n\tpartySize?: number | undefined;\n\tpartyMax?: number | undefined;\n\tmatchSecret?: string | undefined;\n\tjoinSecret?: string | undefined;\n\tspectateSecret?: string | undefined;\n\tbuttons?: { label: string; url: string }[] | undefined;\n\tinstance?: boolean | undefined;\n}\n\nasync function fileDetails(_raw: string, document: TextDocument, selection: Selection) {\n\tlet raw = _raw.slice();\n\n\tif (raw.includes(REPLACE_KEYS.TotalLines)) {\n\t\traw = raw.replace(REPLACE_KEYS.TotalLines, document.lineCount.toLocaleString());\n\t}\n\n\tif (raw.includes(REPLACE_KEYS.CurrentLine)) {\n\t\traw = raw.replace(REPLACE_KEYS.CurrentLine, (selection.active.line + 1).toLocaleString());\n\t}\n\n\tif (raw.includes(REPLACE_KEYS.CurrentColumn)) {\n\t\traw = raw.replace(REPLACE_KEYS.CurrentColumn, (selection.active.character + 1).toLocaleString());\n\t}\n\n\tif (raw.includes(REPLACE_KEYS.FileSize)) {\n\t\tlet currentDivision = 0;\n\t\tlet size: number;\n\t\ttry {\n\t\t\t({ size } = await workspace.fs.stat(document.uri));\n\t\t} catch {\n\t\t\tsize = document.getText().length;\n\t\t}\n\t\tconst originalSize = size;\n\t\tif (originalSize > 1000) {\n\t\t\tsize /= 1000;\n\t\t\tcurrentDivision++;\n\t\t\twhile (size > 1000) {\n\t\t\t\tcurrentDivision++;\n\t\t\t\tsize /= 1000;\n\t\t\t}\n\t\t}\n\n\t\traw = raw.replace(\n\t\t\tREPLACE_KEYS.FileSize,\n\t\t\t`${originalSize > 1000 ? size.toFixed(2) : size}${FILE_SIZES[currentDivision]}`,\n\t\t);\n\t}\n\n\tconst git = await getGit();\n\n\tif (raw.includes(REPLACE_KEYS.GitBranch)) {\n\t\tif (git?.repositories.length) {\n\t\t\traw = raw.replace(\n\t\t\t\tREPLACE_KEYS.GitBranch,\n\t\t\t\tgit.repositories.find((repo) => repo.ui.selected)?.state.HEAD?.name ?? FAKE_EMPTY,\n\t\t\t);\n\t\t} else {\n\t\t\traw = raw.replace(REPLACE_KEYS.GitBranch, UNKNOWN_GIT_BRANCH);\n\t\t}\n\t}\n\n\tif (raw.includes(REPLACE_KEYS.GitRepoName)) {\n\t\tif (git?.repositories.length) {\n\t\t\traw = raw.replace(\n\t\t\t\tREPLACE_KEYS.GitRepoName,\n\t\t\t\tgit.repositories\n\t\t\t\t\t.find((repo) => repo.ui.selected)\n\t\t\t\t\t?.state.remotes[0].fetchUrl?.split('/')[1]\n\t\t\t\t\t.replace('.git', '') ?? FAKE_EMPTY,\n\t\t\t);\n\t\t} else {\n\t\t\traw = raw.replace(REPLACE_KEYS.GitRepoName, UNKNOWN_GIT_REPO_NAME);\n\t\t}\n\t}\n\n\treturn raw;\n}\n\nasync function details(idling: CONFIG_KEYS, editing: CONFIG_KEYS, debugging: CONFIG_KEYS) {\n\tconst config = getConfig();\n\tlet raw = (config[idling] as string).replace(REPLACE_KEYS.Empty, FAKE_EMPTY);\n\n\tif (window.activeTextEditor) {\n\t\tconst fileName = basename(window.activeTextEditor.document.fileName);\n\t\tconst { dir } = parse(window.activeTextEditor.document.fileName);\n\t\tconst split = dir.split(sep);\n\t\tconst dirName = split[split.length - 1];\n\n\t\tconst noWorkspaceFound = config[CONFIG_KEYS.LowerDetailsNoWorkspaceFound].replace(REPLACE_KEYS.Empty, FAKE_EMPTY);\n\t\tconst workspaceFolder = workspace.getWorkspaceFolder(window.activeTextEditor.document.uri);\n\t\tconst workspaceFolderName = workspaceFolder?.name ?? noWorkspaceFound;\n\t\tconst workspaceName = workspace.name?.replace(REPLACE_KEYS.VSCodeWorkspace, EMPTY) ?? workspaceFolderName;\n\t\tconst workspaceAndFolder = `${workspaceName}${\n\t\t\tworkspaceFolderName === FAKE_EMPTY ? '' : ` - ${workspaceFolderName}`\n\t\t}`;\n\n\t\tconst fileIcon = resolveFileIcon(window.activeTextEditor.document);\n\n\t\tif (debug.activeDebugSession) {\n\t\t\traw = config[debugging] as string;\n\t\t} else {\n\t\t\traw = config[editing] as string;\n\t\t}\n\n\t\tif (workspaceFolder) {\n\t\t\tconst { name } = workspaceFolder;\n\t\t\tconst relativePath = workspace.asRelativePath(window.activeTextEditor.document.fileName).split(sep);\n\t\t\trelativePath.splice(-1, 1);\n\t\t\traw = raw.replace(REPLACE_KEYS.FullDirName, `${name}${sep}${relativePath.join(sep)}`);\n\t\t}\n\n\t\ttry {\n\t\t\traw = await fileDetails(raw, window.activeTextEditor.document, window.activeTextEditor.selection);\n\t\t} catch (error) {\n\t\t\tlog(LogLevel.Error, `Failed to generate file details: ${error as string}`);\n\t\t}\n\t\traw = raw\n\t\t\t.replace(REPLACE_KEYS.FileName, fileName)\n\t\t\t.replace(REPLACE_KEYS.DirName, dirName)\n\t\t\t.replace(REPLACE_KEYS.Workspace, workspaceName)\n\t\t\t.replace(REPLACE_KEYS.WorkspaceFolder, workspaceFolderName)\n\t\t\t.replace(REPLACE_KEYS.WorkspaceAndFolder, workspaceAndFolder)\n\t\t\t.replace(REPLACE_KEYS.LanguageLowerCase, toLower(fileIcon))\n\t\t\t.replace(REPLACE_KEYS.LanguageTitleCase, toTitle(fileIcon))\n\t\t\t.replace(REPLACE_KEYS.LanguageUpperCase, toUpper(fileIcon));\n\t}\n\n\treturn raw;\n}\n\nexport async function activity(previous: ActivityPayload = {}) {\n\tconst config = getConfig();\n\tconst swapBigAndSmallImage = config[CONFIG_KEYS.SwapBigAndSmallImage];\n\n\tconst appName = env.appName;\n\tconst defaultSmallImageKey = debug.activeDebugSession\n\t\t? DEBUG_IMAGE_KEY\n\t\t: appName.includes('Insiders')\n\t\t? VSCODE_INSIDERS_IMAGE_KEY\n\t\t: VSCODE_IMAGE_KEY;\n\tconst defaultSmallImageText = config[CONFIG_KEYS.SmallImage].replace(REPLACE_KEYS.AppName, appName);\n\tconst defaultLargeImageText = config[CONFIG_KEYS.LargeImageIdling];\n\tconst removeDetails = config[CONFIG_KEYS.RemoveDetails];\n\tconst removeLowerDetails = config[CONFIG_KEYS.RemoveLowerDetails];\n\tconst removeRemoteRepository = config[CONFIG_KEYS.RemoveRemoteRepository];\n\n\tconst git = await getGit();\n\n\tlet state: ActivityPayload = {\n\t\tdetails: removeDetails\n\t\t\t? undefined\n\t\t\t: await details(CONFIG_KEYS.DetailsIdling, CONFIG_KEYS.DetailsEditing, CONFIG_KEYS.DetailsDebugging),\n\t\tstartTimestamp: config[CONFIG_KEYS.RemoveTimestamp] ? undefined : previous.startTimestamp ?? Date.now(),\n\t\tlargeImageKey: IDLE_IMAGE_KEY,\n\t\tlargeImageText: defaultLargeImageText,\n\t\tsmallImageKey: defaultSmallImageKey,\n\t\tsmallImageText: defaultSmallImageText,\n\t};\n\n\tif (swapBigAndSmallImage) {\n\t\tstate = {\n\t\t\t...state,\n\t\t\tlargeImageKey: defaultSmallImageKey,\n\t\t\tlargeImageText: defaultSmallImageText,\n\t\t\tsmallImageKey: IDLE_IMAGE_KEY,\n\t\t\tsmallImageText: defaultLargeImageText,\n\t\t};\n\t}\n\n\tif (!removeRemoteRepository && git?.repositories.length) {\n\t\tlet repo = git.repositories.find((repo) => repo.ui.selected)?.state.remotes[0]?.fetchUrl;\n\n\t\tif (repo) {\n\t\t\tif (repo.startsWith('git@') || repo.startsWith('ssh://')) {\n\t\t\t\trepo = repo.replace('ssh://', '').replace(':', '/').replace('git@', 'https://').replace('.git', '');\n\t\t\t} else {\n\t\t\t\trepo = repo.replace(/(https:\\/\\/)([^@]*)@(.*?$)/, '$1$3').replace('.git', '');\n\t\t\t}\n\n\t\t\tstate = {\n\t\t\t\t...state,\n\t\t\t\tbuttons: [{ label: 'Go to facebook', url: 'http://facebook.com' }],\n\t\t\t};\n\t\t}\n\t}\n\n\tif (window.activeTextEditor) {\n\t\tconst largeImageKey = resolveFileIcon(window.activeTextEditor.document);\n\t\tconst largeImageText = config[CONFIG_KEYS.LargeImage]\n\t\t\t.replace(REPLACE_KEYS.LanguageLowerCase, toLower(largeImageKey))\n\t\t\t.replace(REPLACE_KEYS.LanguageTitleCase, toTitle(largeImageKey))\n\t\t\t.replace(REPLACE_KEYS.LanguageUpperCase, toUpper(largeImageKey))\n\t\t\t.padEnd(2, FAKE_EMPTY);\n\n\t\tstate = {\n\t\t\t...state,\n\t\t\tdetails: removeDetails\n\t\t\t\t? undefined\n\t\t\t\t: await details(CONFIG_KEYS.DetailsIdling, CONFIG_KEYS.DetailsEditing, CONFIG_KEYS.DetailsDebugging),\n\t\t\tstate: removeLowerDetails\n\t\t\t\t? undefined\n\t\t\t\t: await details(\n\t\t\t\t\t\tCONFIG_KEYS.LowerDetailsIdling,\n\t\t\t\t\t\tCONFIG_KEYS.LowerDetailsEditing,\n\t\t\t\t\t\tCONFIG_KEYS.LowerDetailsDebugging,\n\t\t\t\t  ),\n\t\t};\n\n\t\tif (swapBigAndSmallImage) {\n\t\t\tstate = {\n\t\t\t\t...state,\n\t\t\t\tsmallImageKey: largeImageKey,\n\t\t\t\tsmallImageText: largeImageText,\n\t\t\t};\n\t\t} else {\n\t\t\tstate = {\n\t\t\t\t...state,\n\t\t\t\tlargeImageKey,\n\t\t\t\tlargeImageText,\n\t\t\t};\n\t\t}\n\n\t\tlog(LogLevel.Trace, `VSCode language id: ${window.activeTextEditor.document.languageId}`);\n\t}\n\n\treturn state;\n}\n","import LANG from './data/languages.json';\n\nexport const CLIENT_ID = '383226320970055681' as const;\n\nexport const KNOWN_EXTENSIONS: { [key: string]: { image: string } } = LANG.KNOWN_EXTENSIONS;\nexport const KNOWN_LANGUAGES: { language: string; image: string }[] = LANG.KNOWN_LANGUAGES;\n\nexport const EMPTY = '' as const;\nexport const FAKE_EMPTY = '\\u200b\\u200b' as const;\nexport const FILE_SIZES = [' bytes', 'KB', 'MB', 'GB', 'TB'] as const;\n\nexport const IDLE_IMAGE_KEY = 'vscode-big' as const;\nexport const DEBUG_IMAGE_KEY = 'debug' as const;\nexport const VSCODE_IMAGE_KEY = 'vscode' as const;\nexport const VSCODE_INSIDERS_IMAGE_KEY = 'vscode-insiders' as const;\n\nexport const UNKNOWN_GIT_BRANCH = 'Unknown' as const;\nexport const UNKNOWN_GIT_REPO_NAME = 'Unknown' as const;\n\nexport const enum REPLACE_KEYS {\n\tEmpty = '{empty}',\n\tFileName = '{file_name}',\n\tDirName = '{dir_name}',\n\tFullDirName = '{full_dir_name}',\n\tWorkspace = '{workspace}',\n\tVSCodeWorkspace = '(Workspace)',\n\tWorkspaceFolder = '{workspace_folder}',\n\tWorkspaceAndFolder = '{workspace_and_folder}',\n\tLanguageLowerCase = '{lang}',\n\tLanguageTitleCase = '{Lang}',\n\tLanguageUpperCase = '{LANG}',\n\tTotalLines = '{total_lines}',\n\tCurrentLine = '{current_line}',\n\tCurrentColumn = '{current_column}',\n\tFileSize = '{file_size}',\n\tAppName = '{app_name}',\n\tGitRepoName = '{git_repo_name}',\n\tGitBranch = '{git_branch}',\n}\n\nexport const enum CONFIG_KEYS {\n\tEnabled = 'enabled',\n\tDetailsIdling = 'detailsIdling',\n\tDetailsEditing = 'detailsEditing',\n\tDetailsDebugging = 'detailsDebugging',\n\tLowerDetailsIdling = 'lowerDetailsIdling',\n\tLowerDetailsEditing = 'lowerDetailsEditing',\n\tLowerDetailsDebugging = 'lowerDetailsDebugging',\n\tLowerDetailsNoWorkspaceFound = 'lowerDetailsNoWorkspaceFound',\n\tLargeImageIdling = 'largeImageIdling',\n\tLargeImage = 'largeImage',\n\tSmallImage = 'smallImage',\n\tSuppressNotifications = 'suppressNotifications',\n\tWorkspaceExcludePatterns = 'workspaceExcludePatterns',\n\tSwapBigAndSmallImage = 'swapBigAndSmallImage',\n\tRemoveDetails = 'removeDetails',\n\tRemoveLowerDetails = 'removeLowerDetails',\n\tRemoveTimestamp = 'removeTimestamp',\n\tRemoveRemoteRepository = 'removeRemoteRepository',\n\tIdleTimeout = 'idleTimeout',\n}\n","import { window } from 'vscode';\nimport dayjs from 'dayjs';\n\nconst outputChannel = window.createOutputChannel('Discord Presence');\n\nexport const enum LogLevel {\n\tTrace = 'TRACE',\n\tDebug = 'DEBUG',\n\tInfo = 'INFO',\n\tWarn = 'WARN',\n\tError = 'ERROR',\n}\n\nfunction send(level: string, message: string) {\n\toutputChannel.appendLine(`[${dayjs().format('DD/MM/YYYY HH:mm:ss')} - ${level}] ${message}`);\n}\n\nexport function log(level: LogLevel, message: string | Error) {\n\tif (typeof message === 'string') {\n\t\tsend(level, message);\n\t} else if (message instanceof Error) {\n\t\tsend(level, message.message);\n\n\t\tif (message.stack) {\n\t\t\tsend(level, message.stack);\n\t\t}\n\t} else if (typeof message === 'object') {\n\t\ttry {\n\t\t\tconst json = JSON.stringify(message, null, 2);\n\t\t\tsend(level, json);\n\t\t} catch {}\n\t}\n}\n","// import { basename } from 'path';\nimport { TextDocument, workspace, extensions, WorkspaceConfiguration } from 'vscode';\n\n// import { KNOWN_EXTENSIONS, KNOWN_LANGUAGES } from './constants';\nimport type { API, GitExtension } from './git';\nimport { log, LogLevel } from './logger';\n\nlet git: API | null | undefined;\n\ntype WorkspaceExtensionConfiguration = WorkspaceConfiguration & {\n\tenabled: boolean;\n\tdetailsIdling: string;\n\tdetailsEditing: string;\n\tdetailsDebugging: string;\n\tlowerDetailsIdling: string;\n\tlowerDetailsEditing: string;\n\tlowerDetailsDebugging: string;\n\tlowerDetailsNoWorkspaceFound: string;\n\tlargeImageIdling: string;\n\tlargeImage: string;\n\tsmallImage: string;\n\tsuppressNotifications: boolean;\n\tworkspaceExcludePatterns: string[];\n\tswapBigAndSmallImage: boolean;\n\tremoveDetails: boolean;\n\tremoveLowerDetails: boolean;\n\tremoveTimestamp: boolean;\n\tremoveRemoteRepository: boolean;\n\tidleTimeout: number;\n};\n\nexport function getConfig() {\n\treturn workspace.getConfiguration('discord') as WorkspaceExtensionConfiguration;\n}\n\nexport const toLower = (str: string) => str.toLocaleLowerCase();\n\nexport const toUpper = (str: string) => str.toLocaleUpperCase();\n\nexport const toTitle = (str: string) => toLower(str).replace(/^\\w/, (c) => toUpper(c));\n\nexport function resolveFileIcon(document: TextDocument) {\n\tif (document != undefined) { }\n\t// const filename = basename(document.fileName);\n\t// const findKnownExtension = Object.keys(KNOWN_EXTENSIONS).find((key) => {\n\t// \tif (filename.endsWith(key)) {\n\t// \t\treturn true;\n\t// \t}\n\n\t// \tconst match = /^\\/(.*)\\/([mgiy]+)$/.exec(key);\n\t// \tif (!match) {\n\t// \t\treturn false;\n\t// \t}\n\n\t// \tconst regex = new RegExp(match[1], match[2]);\n\t// \treturn regex.test(filename);\n\t// });\n\t// const findKnownLanguage = KNOWN_LANGUAGES.find((key) => key.language === document.languageId);\n\t// const fileIcon = findKnownExtension\n\t// \t? KNOWN_EXTENSIONS[findKnownExtension]\n\t// \t: findKnownLanguage\n\t// \t? findKnownLanguage.image\n\t// \t: null;\n\n\treturn 'test';\n}\n\nexport async function getGit() {\n\tif (git || git === null) {\n\t\treturn git;\n\t}\n\n\ttry {\n\t\tlog(LogLevel.Debug, 'Loading git extension');\n\t\tconst gitExtension = extensions.getExtension<GitExtension>('vscode.git');\n\t\tif (!gitExtension?.isActive) {\n\t\t\tlog(LogLevel.Trace, 'Git extension not activated, activating...');\n\t\t\tawait gitExtension?.activate();\n\t\t}\n\t\tgit = gitExtension?.exports.getAPI(1);\n\t} catch (error) {\n\t\tgit = null;\n\t\tlog(LogLevel.Error, `Failed to load git extension, is git installed?; ${error as string}`);\n\t}\n\n\treturn git;\n}\n","'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0x00) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0  // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = isValidUTF8;\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (let i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being\n   *     closed\n   * @param {String} reason A human-readable string explaining why the\n   *     connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean`` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage(data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose(code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError(error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen() {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    const method = options && options.once ? 'once' : 'on';\n\n    if (type === 'message') {\n      onMessage._listener = listener;\n      this[method](type, onMessage);\n    } else if (type === 'close') {\n      onClose._listener = listener;\n      this[method](type, onClose);\n    } else if (type === 'error') {\n      onError._listener = listener;\n      this[method](type, onError);\n    } else if (type === 'open') {\n      onOpen._listener = listener;\n      this[method](type, onOpen);\n    } else {\n      this[method](type, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners(type);\n\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n\n  if (header === undefined || header === '') return offers;\n\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 /* ' ' */ || code === 0x09 /* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode, NOOP } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // An `'error'` event is emitted, only on Node.js < 10.0.0, if the\n      // `zlib.DeflateRaw` instance is closed while data is being processed.\n      // This can happen if `PerMessageDeflate#cleanup()` is called at the wrong\n      // time due to an abnormal WebSocket closure.\n      //\n      this._deflate.on('error', NOOP);\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} [binaryType=nodebuffer] The type for binary data\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Boolean} [isServer=false] Specifies whether to operate in client or\n   *     server mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(binaryType, extensions, isServer, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || BINARY_TYPES[0];\n    this[kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._isServer = !!isServer;\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {String} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n  let terminateOnDestroy = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg) {\n    if (!duplex.push(msg)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (\n      (ws.readyState === ws.OPEN || ws.readyState === ws.CLOSING) &&\n      !resumeOnReceiverDrain\n    ) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  let isValidUTF8 = require('utf-8-validate');\n\n  /* istanbul ignore if */\n  if (typeof isValidUTF8 === 'object') {\n    isValidUTF8 = isValidUTF8.Validation.isValidUTF8; // utf-8-validate@<3.0.0\n  }\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8\n  };\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst WebSocket = require('./websocket');\nconst { format, parse } = require('./extension');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(cb) {\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSED) {\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) {\n        server.close(emitClose.bind(undefined, this));\n        return;\n      }\n    }\n\n    process.nextTick(emitClose, this);\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key'].trim()\n        : false;\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' ||\n      req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = parse(req.headers['sec-websocket-extensions']);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(key, extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(key, extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(key, extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n    let protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.split(',').map(trim);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n\n/**\n * Remove whitespace characters from both ends of a string.\n *\n * @param {String} str The string\n * @return {String} A new string representing `str` stripped of whitespace\n *     characters from both its beginning and end\n * @private\n */\nfunction trim(str) {\n  return str.trim();\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst { addEventListener, removeEventListener } = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onclose(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onerror(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onopen(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onmessage(listener) {}\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} [maxPayload=0] The maximum allowed message size\n   * @private\n   */\n  setSocket(socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this.binaryType,\n      this._extensions,\n      this._isServer,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {String} [data] A string explaining why the connection is closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n\n      return undefined;\n    },\n    set(listener) {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {String} [protocols] The subprotocols\n * @param {Object} [options] Connection options\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    parsedUrl = new URL(address);\n    websocket._url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    const err = new Error(`Invalid URL: ${websocket.url}`);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const isSecure =\n    parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    opts.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalUnixSocket = isUnixSocket;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isUnixSocket\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else {\n      const isSameHost = isUnixSocket\n        ? websocket._originalUnixSocket\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalUnixSocket\n        ? false\n        : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (err) {\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    if (res.headers.upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    let protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && !protList.includes(serverProt)) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (extensionNames.length) {\n        if (\n          extensionNames.length !== 1 ||\n          extensionNames[0] !== PerMessageDeflate.extensionName\n        ) {\n          const message =\n            'Server indicated an extension that was not requested';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        try {\n          perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n        } catch (err) {\n          const message = 'Invalid Sec-WebSocket-Extensions header';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        websocket._extensions[PerMessageDeflate.extensionName] =\n          perMessageDeflate;\n      }\n    }\n\n    websocket.setSocket(socket, head, opts.maxPayload);\n  });\n}\n\n/**\n * Emit the `'error'` and `'close'` event.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage(data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","module.exports = require(\"vscode\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"punycode\");","module.exports = require(\"stream\");","module.exports = require(\"timers\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"zlib\");","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nconst isSameProtocol = function isSameProtocol(destination, original) {\n\tconst orig = new URL$1(original).protocol;\n\tconst dest = new URL$1(destination).protocol;\n\n\treturn orig === dest;\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\tdestroyStream(request.body, error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(req, function (err) {\n\t\t\tif (signal && signal.aborted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (parseInt(process.version.substring(1)) < 14) {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\treq.on('socket', function (s) {\n\t\t\t\ts.addListener('close', function (hadError) {\n\t\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\t\tconst hasDataListener = s.listenerCount('data') > 0;\n\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && hasDataListener && !hadError && !(signal && signal.aborted)) {\n\t\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.on('end', function () {\n\t\t\t\t\t// some old IIS servers return zero-length OK deflate responses, so 'data' is never emitted.\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tlet socket;\n\n\trequest.on('socket', function (s) {\n\t\tsocket = s;\n\t});\n\n\trequest.on('response', function (response) {\n\t\tconst headers = response.headers;\n\n\t\tif (headers['transfer-encoding'] === 'chunked' && !headers['content-length']) {\n\t\t\tresponse.once('close', function (hadError) {\n\t\t\t\t// tests for socket presence, as in some situations the\n\t\t\t\t// the 'socket' event is not triggered for the request\n\t\t\t\t// (happens in deno), avoids `TypeError`\n\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\tconst hasDataListener = socket && socket.listenerCount('data') > 0;\n\n\t\t\t\tif (hasDataListener && !hadError) {\n\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\terrorCallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction destroyStream(stream, err) {\n\tif (stream.destroy) {\n\t\tstream.destroy(err);\n\t} else {\n\t\t// node < 8\n\t\tstream.emit('error', err);\n\t\tstream.end();\n\t}\n}\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError, AbortError };\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access */\n\nconst { Client } = require('discord-rpc'); // eslint-disable-line\nimport { commands, ExtensionContext, StatusBarAlignment, StatusBarItem, window, workspace, debug } from 'vscode';\nimport throttle from 'lodash-es/throttle';\n\nimport { activity } from './activity';\nimport { CLIENT_ID, CONFIG_KEYS } from './constants';\nimport { log, LogLevel } from './logger';\nimport { getConfig, getGit } from './util';\n\nconst statusBarIcon: StatusBarItem = window.createStatusBarItem(StatusBarAlignment.Left);\nstatusBarIcon.text = '$(pulse) Connecting to Discord...';\n\n// eslint-disable-next-line\nlet rpc = new Client({ transport: 'ipc' });\nconst config = getConfig();\n\nlet state = {};\nlet idle: NodeJS.Timeout | undefined;\nlet listeners: { dispose: () => any }[] = [];\n\nexport function cleanUp() {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\tlisteners.forEach((listener) => listener.dispose());\n\tlisteners = [];\n}\n\nasync function sendActivity() {\n\tstate = {\n\t\t...(await activity(state)),\n\t};\n\trpc.setActivity(state);\n}\n\nasync function login() {\n\tlog(LogLevel.Info, 'Creating discord-rpc client');\n\trpc = new Client({ transport: 'ipc' });\n\n\trpc.on('ready', () => {\n\t\tlog(LogLevel.Info, 'Successfully connected to Discord');\n\t\tcleanUp();\n\n\t\tstatusBarIcon.text = '$(globe) Connected to Discord';\n\t\tstatusBarIcon.tooltip = 'Connected to Discord';\n\n\t\tvoid sendActivity();\n\t\tconst onChangeActiveTextEditor = window.onDidChangeActiveTextEditor(() => sendActivity());\n\t\tconst onChangeTextDocument = workspace.onDidChangeTextDocument(throttle(() => sendActivity(), 2000));\n\t\tconst onStartDebugSession = debug.onDidStartDebugSession(() => sendActivity());\n\t\tconst onTerminateDebugSession = debug.onDidTerminateDebugSession(() => sendActivity());\n\n\t\tlisteners.push(onChangeActiveTextEditor, onChangeTextDocument, onStartDebugSession, onTerminateDebugSession);\n\t});\n\n\trpc.on('disconnected', () => {\n\t\tcleanUp();\n\t\trpc.destroy();\n\t\tstatusBarIcon.text = '$(pulse) Reconnect to Discord';\n\t\tstatusBarIcon.command = 'discord.reconnect';\n\t});\n\n\ttry {\n\t\tawait rpc.login({ clientId: CLIENT_ID });\n\t} catch (error) {\n\t\tlog(LogLevel.Error, `Encountered following error while trying to login:\\n${error as string}`);\n\t\tcleanUp();\n\t\trpc.destroy();\n\t\tif (!config[CONFIG_KEYS.SuppressNotifications]) {\n\t\t\t// @ts-expect-error\n\t\t\tif (error?.message?.includes('ENOENT')) void window.showErrorMessage('No Discord client detected');\n\t\t\telse void window.showErrorMessage(`Couldn't connect to Discord via RPC: ${error as string}`);\n\t\t}\n\t\tstatusBarIcon.text = '$(pulse) Reconnect to Discord';\n\t\tstatusBarIcon.command = 'discord.reconnect';\n\t}\n}\n\nexport async function activate(context: ExtensionContext) {\n\tlog(LogLevel.Info, 'Discord Presence activated');\n\n\tlet isWorkspaceExcluded = false;\n\tfor (const pattern of config[CONFIG_KEYS.WorkspaceExcludePatterns]) {\n\t\tconst regex = new RegExp(pattern);\n\t\tconst folders = workspace.workspaceFolders;\n\t\tif (!folders) break;\n\t\tif (folders.some((folder) => regex.test(folder.uri.fsPath))) {\n\t\t\tisWorkspaceExcluded = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst enable = async (update = true) => {\n\t\tif (update) {\n\t\t\ttry {\n\t\t\t\tawait config.update('enabled', true);\n\t\t\t} catch {}\n\t\t}\n\t\tlog(LogLevel.Info, 'Enable: Cleaning up old listeners');\n\t\tcleanUp();\n\t\tstatusBarIcon.text = '$(pulse) Connecting to Discord...';\n\t\tstatusBarIcon.show();\n\t\tlog(LogLevel.Info, 'Enable: Attempting to recreate login');\n\t\tvoid login();\n\t};\n\n\tconst disable = async (update = true) => {\n\t\tif (update) {\n\t\t\ttry {\n\t\t\t\tawait config.update('enabled', false);\n\t\t\t} catch {}\n\t\t}\n\t\tlog(LogLevel.Info, 'Disable: Cleaning up old listeners');\n\t\tcleanUp();\n\t\tvoid rpc?.destroy();\n\t\tlog(LogLevel.Info, 'Disable: Destroyed the rpc instance');\n\t\tstatusBarIcon.hide();\n\t};\n\n\tconst enabler = commands.registerCommand('discord.enable', async () => {\n\t\tawait disable();\n\t\tawait enable();\n\t\tawait window.showInformationMessage('Enabled Discord Presence for this workspace');\n\t});\n\n\tconst disabler = commands.registerCommand('discord.disable', async () => {\n\t\tawait disable();\n\t\tawait window.showInformationMessage('Disabled Discord Presence for this workspace');\n\t});\n\n\tconst reconnecter = commands.registerCommand('discord.reconnect', async () => {\n\t\tawait disable(false);\n\t\tawait enable(false);\n\t});\n\n\tconst disconnect = commands.registerCommand('discord.disconnect', async () => {\n\t\tawait disable(false);\n\t\tstatusBarIcon.text = '$(pulse) Reconnect to Discord';\n\t\tstatusBarIcon.command = 'discord.reconnect';\n\t\tstatusBarIcon.show();\n\t});\n\n\tcontext.subscriptions.push(enabler, disabler, reconnecter, disconnect);\n\n\tif (!isWorkspaceExcluded && config[CONFIG_KEYS.Enabled]) {\n\t\tstatusBarIcon.show();\n\t\tawait login();\n\t}\n\n\twindow.onDidChangeWindowState(async (windowState) => {\n\t\tif (config[CONFIG_KEYS.IdleTimeout] !== 0) {\n\t\t\tif (windowState.focused) {\n\t\t\t\tif (idle) {\n\t\t\t\t\tclearTimeout(idle);\n\t\t\t\t}\n\n\t\t\t\tawait sendActivity();\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-misused-promises\n\t\t\t\tidle = setTimeout(async () => {\n\t\t\t\t\tstate = {};\n\t\t\t\t\tawait rpc.clearActivity();\n\t\t\t\t}, config[CONFIG_KEYS.IdleTimeout] * 1000);\n\t\t\t}\n\t\t}\n\t});\n\n\tawait getGit();\n}\n\nexport function deactivate() {\n\tcleanUp();\n\tvoid rpc.destroy();\n}\n"],"names":["fs","path","fileURLToPath","join","dirname","exists","accessSync","e","existsSync","defaults","arrow","process","env","NODE_BINDINGS_ARROW","compiled","NODE_BINDINGS_COMPILED_DIR","platform","arch","nodePreGyp","versions","modules","version","node","bindings","try","module","exports","opts","Object","keys","map","i","module_root","getRoot","getFileName","extname","n","b","err","requireFunc","tries","l","length","apply","p","push","resolve","code","test","message","Error","a","calling_file","fileName","origPST","prepareStackTrace","origSTL","stackTraceLimit","dummy","st","__filename","captureStackTrace","indexOf","file","prev","dir","cwd","mask","source","output","offset","unmask","buffer","__dirname","t","r","s","u","o","c","f","h","d","$","y","M","name","weekdays","split","months","ordinal","m","String","Array","v","z","utcOffset","Math","abs","floor","date","year","month","clone","add","ceil","w","D","ms","Q","toLowerCase","replace","g","S","_","O","args","arguments","locale","$L","utc","$u","x","$x","$offset","this","parse","prototype","$d","Date","NaN","match","substring","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","slice","$locale","weekStart","$set","min","daysInMonth","get","Number","round","subtract","format","invalidDate","meridiem","monthsShort","weekdaysMin","weekdaysShort","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","k","forEach","extend","$i","isDayjs","en","Ls","EventEmitter","fetch","transports","pid","getPid","RPCClient","constructor","options","super","accessToken","clientId","application","user","Transport","transport","TypeError","method","data","query","endpoint","URLSearchParams","body","headers","Authorization","then","async","json","ok","status","on","_onRpcMessage","bind","_expecting","Map","_connectPromise","undefined","connect","Promise","reject","timeout","setTimeout","unref","once","clearTimeout","emit","catch","login","scopes","authorize","authenticate","request","cmd","evt","nonce","uuid","send","RPCCommands","DISPATCH","RPCEvents","READY","has","delete","clientSecret","rpcToken","client_id","client_secret","rpc_token","prompt","grant_type","redirect_uri","redirectUri","access_token","getGuild","id","GET_GUILD","guild_id","getGuilds","GET_GUILDS","getChannel","GET_CHANNEL","channel_id","getChannels","GET_CHANNELS","channels","setCertifiedDevices","devices","SET_CERTIFIED_DEVICES","type","vendor","model","related","echo_cancellation","echoCancellation","noise_suppression","noiseSuppression","automatic_gain_control","automaticGainControl","hardware_mute","hardwareMute","setUserVoiceSettings","settings","SET_USER_VOICE_SETTINGS","user_id","pan","mute","volume","selectVoiceChannel","SELECT_VOICE_CHANNEL","force","selectTextChannel","SELECT_TEXT_CHANNEL","getVoiceSettings","GET_VOICE_SETTINGS","qos","silenceWarning","silence_warning","deaf","input","availableDevices","available_devices","device","device_id","mode","autoThreshold","auto_threshold","threshold","shortcut","delay","setVoiceSettings","SET_VOICE_SETTINGS","captureShortcut","callback","subid","subKey","event","JSON","stringify","CAPTURE_SHORTCUT_CHANGE","stop","_subscriptions","CAPTURE_SHORTCUT","action","setActivity","timestamps","assets","party","secrets","startTimestamp","endTimestamp","start","end","RangeError","largeImageKey","largeImageText","smallImageKey","smallImageText","large_image","large_text","small_image","small_text","partySize","partyId","partyMax","size","matchSecret","joinSecret","spectateSecret","spectate","SET_ACTIVITY","activity","state","details","buttons","instance","clearActivity","sendJoinInvite","SEND_ACTIVITY_JOIN_INVITE","sendJoinRequest","SEND_ACTIVITY_JOIN_REQUEST","closeJoinRequest","CLOSE_ACTIVITY_JOIN_REQUEST","createLobby","capacity","metadata","CREATE_LOBBY","updateLobby","lobby","UPDATE_LOBBY","owner_id","owner","deleteLobby","DELETE_LOBBY","connectToLobby","secret","CONNECT_TO_LOBBY","sendToLobby","SEND_TO_LOBBY","disconnectFromLobby","DISCONNECT_FROM_LOBBY","updateLobbyMember","UPDATE_LOBBY_MEMBER","lobby_id","getRelationships","types","RelationshipTypes","GET_RELATIONSHIPS","relationships","subscribe","SUBSCRIBE","unsubscribe","UNSUBSCRIBE","destroy","close","keyMirror","arr","tmp","value","browser","window","RPCErrors","CAPTURE_SHORTCUT_ALREADY_LISTENING","GET_GUILD_TIMED_OUT","INVALID_ACTIVITY_JOIN_REQUEST","INVALID_ACTIVITY_SECRET","INVALID_CHANNEL","INVALID_CLIENTID","INVALID_COMMAND","INVALID_ENTITLEMENT","INVALID_EVENT","INVALID_GIFT_CODE","INVALID_GUILD","INVALID_INVITE","INVALID_LOBBY","INVALID_LOBBY_SECRET","INVALID_ORIGIN","INVALID_PAYLOAD","INVALID_PERMISSIONS","INVALID_TOKEN","INVALID_USER","LOBBY_FULL","NO_ELIGIBLE_ACTIVITY","OAUTH2_ERROR","PURCHASE_CANCELED","PURCHASE_ERROR","RATE_LIMITED","SELECT_CHANNEL_TIMED_OUT","SELECT_VOICE_FORCE_REQUIRED","SERVICE_UNAVAILABLE","TRANSACTION_ABORTED","UNAUTHORIZED_FOR_ACHIEVEMENT","UNKNOWN_ERROR","RPCCloseCodes","CLOSE_NORMAL","CLOSE_UNSUPPORTED","CLOSE_ABNORMAL","RATELIMITED","TOKEN_REVOKED","INVALID_VERSION","INVALID_ENCODING","LobbyTypes","PRIVATE","PUBLIC","NONE","FRIEND","BLOCKED","PENDING_INCOMING","PENDING_OUTGOING","IMPLICIT","util","Client","register","ipc","websocket","net","OPCodes","getIPC","getIPCPath","XDG_RUNTIME_DIR","TMPDIR","TMP","TEMP","onerror","sock","createConnection","removeListener","findEndpoint","encode","op","len","Buffer","byteLength","packet","alloc","writeInt32LE","write","working","full","decode","socket","read","raw","readInt32LE","IPCTransport","client","onClose","pause","ping","WebSocket","WebSocketTransport","ws","port","origin","onopen","onOpen","onclose","onError","onmessage","onMessage","wasClean","error","app","setAsDefaultProtocolClient","random","sep","fileUriToPath","uri","rest","decodeURI","firstSlash","host","runtimeRequire","addon","os","vars","config","variables","prebuildsOnly","PREBUILDS_ONLY","abi","runtime","isElectron","electron","ELECTRON_RUN_AS_NODE","isNwjs","nw","npm_config_arch","npm_config_platform","libc","LIBC","isAlpine","armv","ARM_VERSION","arm_version","uv","load","readdirSync","getFirst","filter","files","matchBuild","parseTuple","architectures","every","Boolean","matchTuple","tuple","includes","compareTuples","parseTags","tags","specificity","pop","tag","napi","matchTags","runtimeAgnostic","compareTags","toUpperCase","release","debug","prebuild","nearby","execPath","target","sort","prebuilds","winner","registerProtocolHandler","punycode","mappingTable","PROCESSING_OPTIONS","TRANSITIONAL","NONTRANSITIONAL","normalize","str","findStatus","val","mid","regexAstralSymbols","countSymbols","string","combiningMarksRegex","validateLabel","label","processing_option","substr","toUnicode","search","codePointAt","processing","domain_name","useSTD3","result","mapChars","hasError","processed","codePoint","fromCodePoint","labels","validation","toASCII","verifyDnsLength","total","domain","idling","editing","debugging","getConfig","FAKE_EMPTY","activeTextEditor","basename","document","dirName","noWorkspaceFound","workspaceFolder","workspace","getWorkspaceFolder","workspaceFolderName","workspaceName","EMPTY","workspaceAndFolder","fileIcon","resolveFileIcon","activeDebugSession","relativePath","asRelativePath","splice","fileDetails","_raw","selection","lineCount","toLocaleString","active","line","character","currentDivision","stat","getText","originalSize","toFixed","FILE_SIZES","git","getGit","repositories","find","repo","ui","selected","HEAD","UNKNOWN_GIT_BRANCH","remotes","fetchUrl","UNKNOWN_GIT_REPO_NAME","log","toLower","toTitle","toUpper","previous","swapBigAndSmallImage","appName","defaultSmallImageKey","DEBUG_IMAGE_KEY","VSCODE_INSIDERS_IMAGE_KEY","VSCODE_IMAGE_KEY","defaultSmallImageText","defaultLargeImageText","removeDetails","removeLowerDetails","removeRemoteRepository","now","IDLE_IMAGE_KEY","startsWith","url","padEnd","languageId","CLIENT_ID","KNOWN_EXTENSIONS","KNOWN_LANGUAGES","REPLACE_KEYS","CONFIG_KEYS","outputChannel","createOutputChannel","level","appendLine","LogLevel","stack","getConfiguration","toLocaleLowerCase","toLocaleUpperCase","gitExtension","extensions","getExtension","isActive","activate","getAPI","isValidUTF8","buf","conversions","sign","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","pow","upperBound","moduloVal","moduloBitLength","moduloBound","V","enforceRange","isFinite","isNaN","clamp","evenRound","treatNullAsEmptyString","U","charCodeAt","RegExp","usm","implementation","URLImpl","constructorArgs","base","parsedBase","basicURLParse","parsedURL","baseURL","_url","href","serializeURL","serializeURLOrigin","protocol","scheme","stateOverride","username","cannotHaveAUsernamePasswordPort","setTheUsername","password","setThePassword","serializeHost","serializeInteger","cannotBeABaseURL","hostname","pathname","hash","fragment","utils","Impl","impl","implSymbol","URL","setup","is","defineProperty","enumerable","configurable","obj","create","privateData","wrapper","wrapperSymbol","interface","expose","Window","Worker","tr46","specialSchemes","ftp","gopher","http","https","wss","failure","Symbol","ucs2","at","idx","isASCIIDigit","isASCIIAlpha","isASCIIHex","isSingleDot","isWindowsDriveLetterString","isSpecialScheme","isSpecial","percentEncode","hex","isC0ControlPercentEncode","extraPathPercentEncodeSet","Set","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","percentEncodeChar","encodeSetPredicate","cStr","utf8PercentEncode","parseIPv4Number","R","charAt","parseInt","parseHost","isSpecialArg","parseIPv6","address","pieceIndex","compress","pointer","numbersSeen","ipv4Piece","number","swaps","temp","parseOpaqueHost","containsForbiddenHostCodePointExcludingPercent","decoded","utf8PercentDecode","asciiDomain","containsForbiddenHostCodePoint","ipv4Host","parseIPv4","parts","numbers","part","ipv4","counter","serializeIPv4","serializeIPv6","findLongestZeroSequence","maxIdx","maxLen","currStart","currLen","ignore0","shortenPath","isNormalizedWindowsDriveLetter","includesCredentials","URLStateMachine","encodingOverride","parseError","res","trimControlChars","trimTabAndNewline","atFlag","arrFlag","passwordTokenSeenFlag","ret","parseSchemeStart","parseScheme","isASCIIAlphanumeric","parseNoScheme","parseSpecialRelativeOrAuthority","parsePathOrAuthority","parseRelative","parseRelativeSlash","parseSpecialAuthoritySlashes","parseSpecialAuthorityIgnoreSlashes","parseAuthority","encodedCodePoints","parseHostName","parsePort","defaultPort","fileOtherwiseCodePoints","parseFile","isWindowsDriveLetterCodePoints","cp1","cp2","parseFileSlash","isNormalizedWindowsDriveLetterString","parseFileHost","parsePathStart","parsePath","isDoubleDot","shift","parseCannotBeABaseURLPath","parseQuery","parseFragment","excludeFragment","parseURL","serializeOrigin","integer","mixin","getOwnPropertyNames","getOwnPropertyDescriptor","wrapperForImpl","implForWrapper","createWebSocketStream","Server","Receiver","Sender","concat","list","totalLength","EMPTY_BUFFER","allocUnsafe","_mask","_unmask","toArrayBuffer","byteOffset","toBuffer","readOnly","isBuffer","ArrayBuffer","from","isView","bufferUtil","bu","BufferUtil","BINARY_TYPES","GUID","kStatusCode","kWebSocket","NOOP","Event","MessageEvent","CloseEvent","reason","_closeFrameReceived","_closeFrameSent","OpenEvent","ErrorEvent","EventTarget","addEventListener","listener","call","_listener","removeEventListener","listeners","tokenChars","dest","elem","extension","configurations","isArray","params","values","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","SyntaxError","token","kDone","kRun","Limiter","concurrency","pending","Infinity","jobs","job","zlib","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","deflateOnData","chunk","inflateOnData","_maxPayload","reset","inflateOnError","_inflate","PerMessageDeflate","isServer","maxPayload","_options","_threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","cleanup","accepted","response","key","num","isInteger","decompress","fin","done","_decompress","_compress","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","flush","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","ErrorCtor","prefix","statusCode","errorCode","Writable","binaryType","_binaryType","_extensions","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","_write","encoding","cb","startLoop","consume","dst","Uint8Array","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","compressed","haveLength","readUInt16BE","readUInt32BE","controlMessage","dataMessage","er","messageLength","fragments","isValidStatusCode","applyMask","_socket","_firstFragment","_deflating","_queue","frame","merge","payloadLength","opcode","rsv1","writeUInt16BE","writeUInt32BE","randomFillSync","enqueue","doClose","sendFrame","doPing","pong","doPong","perMessageDeflate","binary","dispatch","destroyed","dequeue","Reflect","cork","uncork","emitClose","stream","duplexOnEnd","_writableState","finished","duplexOnError","listenerCount","resumeOnReceiverDrain","terminateOnDestroy","receiverOnDrain","resume","readyState","CONNECTING","open","_receiver","removeAllListeners","duplex","Duplex","autoDestroy","objectMode","writableObjectMode","msg","_destroy","CLOSED","nextTick","called","terminate","_final","finish","_read","OPEN","CLOSING","needDrain","_isValidUTF8","Validation","keyRegex","server","socketOnError","abortHandshake","writable","STATUS_CODES","Connection","trim","WebSocketServer","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","req","writeHead","listen","emitConnection","_removeListeners","addListeners","removeListeners","listening","upgrade","head","handleUpgrade","clients","shouldHandle","index","info","secure","authorized","encrypted","verified","completeUpgrade","readable","createHash","update","digest","_protocol","setSocket","tls","readyStates","protocolVersions","protocols","_closeCode","_closeMessage","_closeTimer","_readyState","_sender","_bufferedAmount","_redirects","initAsClient","bufferedAmount","receiver","receiverOnConclude","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","unshift","socketOnClose","socketOnData","socketOnEnd","_req","errorEmitted","sendAfterClose","protocolVersion","followRedirects","maxRedirects","socketPath","parsedUrl","isUnixSocket","emitErrorAndClose","isSecure","randomBytes","tlsConnect","netConnect","Upgrade","handshakeTimeout","Origin","auth","_originalUnixSocket","_originalSecure","_originalHostOrSocketPath","entries","isSameHost","authorization","cookie","aborted","location","addr","abort","serverProt","protList","protError","secWebSocketExtensions","extensionNames","servername","isIP","setHeader","receiverOnFinish","property","require","isObject","global","freeSelf","self","Function","reWhitespace","trimmedEndIndex","reTrimStart","baseTrim","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","unmasked","objectToString","baseGetTag","isObjectLike","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","other","isBinary","nativeMax","max","nativeMin","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","remainingWait","timeWaiting","debounced","isInvoking","leadingEdge","cancel","throttle","Readable","BUFFER","TYPE","Blob","blobParts","buffers","element","text","arrayBuffer","ab","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","systemError","errno","convert","defineProperties","INTERNALS","PassThrough","Body","_this","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","disturbed","consumeBody","_this4","accum","accumBytes","resTimeout","append","getAll","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","assign","_this2","textConverted","_this3","convertBody","charset","exec","mixIn","proto","desc","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","MAP","Headers","rawHeaders","headerNames","headerName","iterator","pairs","pair","getHeaders","_pairs$i","createHeadersIterator","kind","INTERNAL","HeadersIteratorPrototype","setPrototypeOf","next","getPrototypeOf","_INTERNAL","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","INTERNALS$1","Response","contentType","statusText","redirected","INTERNALS$2","parse_url","format_url","urlStr","streamDestructionSupported","isRequest","Request","inputBody","signal","isAbortSignal","redirect","follow","agent","AbortError","URL$1","PassThrough$1","getNodeRequestOptions","contentLengthValue","totalBytes","destroyStream","abortAndFinalize","finalize","reqTimeout","fixResponseChunkedTransferBadEnding","errorCallback","hadError","addListener","hasDataListener","createHeadersLenient","isRedirect","locationURL","requestOpts","isDomainOrSubdomain","destination","original","orig","endsWith","isSameProtocol","response_options","statusMessage","codings","zlibOptions","finishFlush","writeToStream","extendStatics","__extends","__","__assign","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","decorate","__param","paramIndex","decorator","__esDecorate","ctor","descriptorIn","contextIn","initializers","extraInitializers","descriptor","context","access","addInitializer","__runInitializers","useValue","__propKey","__setFunctionName","description","__metadata","metadataKey","metadataValue","__awaiter","_arguments","P","generator","fulfilled","step","rejected","adopt","__generator","sent","trys","ops","verb","__createBinding","k2","__esModule","__exportStar","__values","__read","ar","__spread","__spreadArrays","il","j","jl","__spreadArray","to","pack","__await","__asyncGenerator","asyncIterator","q","fulfill","settle","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","__setModuleDefault","__importStar","mod","__importDefault","default","__classPrivateFieldGet","__classPrivateFieldSet","__classPrivateFieldIn","__addDisposableResource","dispose","asyncDispose","_SuppressedError","SuppressedError","suppressed","__disposeResources","fail","rec","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","prop","statusBarIcon","createStatusBarItem","StatusBarAlignment","Left","rpc","idle","cleanUp","sendActivity","tooltip","onChangeActiveTextEditor","onDidChangeActiveTextEditor","onChangeTextDocument","onDidChangeTextDocument","onStartDebugSession","onDidStartDebugSession","onTerminateDebugSession","onDidTerminateDebugSession","command","showErrorMessage","isWorkspaceExcluded","pattern","regex","folders","workspaceFolders","some","folder","fsPath","enable","show","disable","hide","enabler","commands","registerCommand","showInformationMessage","disabler","reconnecter","disconnect","subscriptions","onDidChangeWindowState","windowState","focused","deactivate"],"sourceRoot":""}